<% layout("/layouts/boilerplate") %> <%- include('includes/navbar.ejs') %>
<div class="container">
  <div id="carouselExampleIndicators" class="carousel slide">
    <div class="carousel-indicators">
      <button
        type="button"
        data-bs-target="#carouselExampleIndicators"
        data-bs-slide-to="0"
        class="active"
        aria-current="true"
        aria-label="Slide 1"
      ></button>
      <button
        type="button"
        data-bs-target="#carouselExampleIndicators"
        data-bs-slide-to="1"
        aria-label="Slide 2"
      ></button>
      <button
        type="button"
        data-bs-target="#carouselExampleIndicators"
        data-bs-slide-to="2"
        aria-label="Slide 3"
      ></button>
    </div>
    <div class="carousel-inner">
      <div class="carousel-item active">
        <img
          style="height: 45vh; width: 100vw; object-fit: cover"
          src="https://plus.unsplash.com/premium_photo-1669904022334-e40da006a0a3?q=80&w=2938&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"
          class="d-block w-100"
          alt="blog-image1"
        />
      </div>
      <div class="carousel-item">
        <img
          style="height: 45vh; width: 100vw; object-fit: cover"
          src="https://images.unsplash.com/photo-1488190211105-8b0e65b80b4e?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"
          class="d-block w-100"
          alt="blog-image2"
        />
      </div>
      <div class="carousel-item">
        <img
          style="height: 45vh; width: 100vw; object-fit: cover"
          src="https://jumpseller.com/images/learn/create-a-blog/blog.jpg"
          class="d-block w-100"
          alt="blog-image3"
        />
      </div>
    </div>
    <button
      class="carousel-control-prev"
      type="button"
      data-bs-target="#carouselExampleIndicators"
      data-bs-slide="prev"
    >
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Previous</span>
    </button>
    <button
      class="carousel-control-next"
      type="button"
      data-bs-target="#carouselExampleIndicators"
      data-bs-slide="next"
    >
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Next</span>
    </button>
  </div>

  <!-- Bootstrap Tab Navigation -->
  <ul class="nav nav-pills mt-4" id="pills-tab" role="tablist">
    <% const categories = ["All", "Tech", "Food", "Travel", "Lifestyle",
    "Business", "Fashion & Beauty", "Health & Fitness"]; %> <%
    categories.forEach((cat, index) => { %>
    <li class="nav-item" role="presentation">
      <button
        class="nav-link cat <%= index === 0 ? 'active' : '' %>"
        id="pills-<%= cat.replace(/\s+/g, '-').toLowerCase() %>-tab"
        data-bs-toggle="pill"
        data-bs-target="#pills-<%= cat.replace(/\s+/g, '-').toLowerCase() %>"
        type="button"
        role="tab"
        aria-controls="pills-<%= cat.replace(/\s+/g, '-').toLowerCase() %>"
        aria-selected="<%= index === 0 ? 'true' : 'false' %>"
      >
        <b><%= cat.toUpperCase() %></b>
      </button>
    </li>
    <% }) %>
  </ul>

  <!-- Tab Content (Loads Categories Dynamically) -->
  <div class="tab-content" id="pills-tabContent">
    <% categories.forEach((cat, index) => { %>
    <div
      class="tab-pane fade <%= index === 0 ? 'show active' : '' %>"
      id="pills-<%= cat.replace(/\s+/g, '-').toLowerCase() %>"
      role="tabpanel"
      aria-labelledby="pills-<%= cat.replace(/\s+/g, '-').toLowerCase() %>-tab"
    >
      <!-- Include category content dynamically -->
      <%- include('category.ejs', { allListings, selectedCategory: cat }) %>
    </div>
    <% }) %>
  </div>
</div>
